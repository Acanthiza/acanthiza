---
title: My segment data
author: nige
date: '2018-10-09'
slug: my-segment-data
categories:
  - data
  - rides
  - R
tags:
  - data
  - rides
  - strava
  - veloviewer
---



<p>Having Strava do all the work makes recording segments (efforts/laps) all too easy. It used to take pressing the lap button at the start and end of a climb and then scrolling through that data post-ride to enter the data into MS Access - not a process I miss.</p>
<p>Given the plethora of segments on Strava these days, filtering segments of interest is essential. As a starting point, I retrieved starred segments ridden more than 40 times. Combining the segment data gave 1581 individual efforts on 13 segments which were both starred and ridden more than 40 times. See <a href="https://acanthiza.netlify.com/post/20170714_rides/">this post</a> for details on combining ride data from pre-Strava.</p>
<hr />
<table>
<caption>
<span id="tab:lapsAccess">Table 1: </span>First few rows/columns of segment data from MS Access
</caption>
<thead>
<tr>
<th style="text-align:left;">
Date
</th>
<th style="text-align:left;">
Gear
</th>
<th style="text-align:left;">
LapName
</th>
<th style="text-align:right;">
LDis
</th>
<th style="text-align:right;">
LTime
</th>
<th style="text-align:right;">
LHRAverage
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
2001-12-09
</td>
<td style="text-align:left;">
roadie
</td>
<td style="text-align:left;">
Humpty
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
869
</td>
<td style="text-align:right;">
128
</td>
</tr>
<tr>
<td style="text-align:left;">
2001-12-10
</td>
<td style="text-align:left;">
roadie
</td>
<td style="text-align:left;">
Belair NP - Eastern Gate
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
289
</td>
<td style="text-align:right;">
162
</td>
</tr>
<tr>
<td style="text-align:left;">
2001-12-13
</td>
<td style="text-align:left;">
roadie
</td>
<td style="text-align:left;">
Full Norton - bridge to gates
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
1051
</td>
<td style="text-align:right;">
171
</td>
</tr>
<tr>
<td style="text-align:left;">
2001-12-13
</td>
<td style="text-align:left;">
roadie
</td>
<td style="text-align:left;">
Belair NP - Eastern Gate
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
335
</td>
<td style="text-align:right;">
147
</td>
</tr>
<tr>
<td style="text-align:left;">
2002-01-20
</td>
<td style="text-align:left;">
roadie
</td>
<td style="text-align:left;">
Belair NP - Eastern Gate
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
253
</td>
<td style="text-align:right;">
154
</td>
</tr>
<tr>
<td style="text-align:left;">
2002-03-14
</td>
<td style="text-align:left;">
cx
</td>
<td style="text-align:left;">
Belair NP - Eastern Gate
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
263
</td>
<td style="text-align:right;">
161
</td>
</tr>
<tr>
<td style="text-align:left;">
2002-03-19
</td>
<td style="text-align:left;">
mtb
</td>
<td style="text-align:left;">
Belair NP - Eastern Gate
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
308
</td>
<td style="text-align:right;">
153
</td>
</tr>
<tr>
<td style="text-align:left;">
2002-04-04
</td>
<td style="text-align:left;">
roadie
</td>
<td style="text-align:left;">
Windy Point Climb
</td>
<td style="text-align:right;">
3.15
</td>
<td style="text-align:right;">
680
</td>
<td style="text-align:right;">
159
</td>
</tr>
<tr>
<td style="text-align:left;">
2002-04-25
</td>
<td style="text-align:left;">
roadie
</td>
<td style="text-align:left;">
Belair NP - Eastern Gate
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
309
</td>
<td style="text-align:right;">
165
</td>
</tr>
<tr>
<td style="text-align:left;">
2002-04-30
</td>
<td style="text-align:left;">
roadie
</td>
<td style="text-align:left;">
Pole Rd (to Upper Sturt)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
325
</td>
<td style="text-align:right;">
147
</td>
</tr>
</tbody>
</table>
<hr />
<table>
<caption>
<span id="tab:lapsStrava">Table 2: </span>First few rows/columns of segment data from strava
</caption>
<thead>
<tr>
<th style="text-align:left;">
Date
</th>
<th style="text-align:left;">
Gear
</th>
<th style="text-align:left;">
LapName
</th>
<th style="text-align:right;">
LDis
</th>
<th style="text-align:right;">
LTime
</th>
<th style="text-align:right;">
LHRAverage
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
2012-12-20
</td>
<td style="text-align:left;">
cx
</td>
<td style="text-align:left;">
MtOsmond-Bullock-OldFreeway
</td>
<td style="text-align:right;">
6.91360
</td>
<td style="text-align:right;">
1575
</td>
<td style="text-align:right;">
151.3
</td>
</tr>
<tr>
<td style="text-align:left;">
2013-01-24
</td>
<td style="text-align:left;">
cx
</td>
<td style="text-align:left;">
MtOsmond-Bullock-OldFreeway
</td>
<td style="text-align:right;">
6.90590
</td>
<td style="text-align:right;">
1584
</td>
<td style="text-align:right;">
163.2
</td>
</tr>
<tr>
<td style="text-align:left;">
2014-07-08
</td>
<td style="text-align:left;">
cx
</td>
<td style="text-align:left;">
MtOsmond-Bullock-OldFreeway
</td>
<td style="text-align:right;">
6.90670
</td>
<td style="text-align:right;">
1635
</td>
<td style="text-align:right;">
156.5
</td>
</tr>
<tr>
<td style="text-align:left;">
2018-03-29
</td>
<td style="text-align:left;">
cx
</td>
<td style="text-align:left;">
MtOsmond-Bullock-OldFreeway
</td>
<td style="text-align:right;">
6.91690
</td>
<td style="text-align:right;">
1692
</td>
<td style="text-align:right;">
157.4
</td>
</tr>
<tr>
<td style="text-align:left;">
2014-07-31
</td>
<td style="text-align:left;">
cx
</td>
<td style="text-align:left;">
MtOsmond-Bullock-OldFreeway
</td>
<td style="text-align:right;">
6.90280
</td>
<td style="text-align:right;">
1698
</td>
<td style="text-align:right;">
153.8
</td>
</tr>
<tr>
<td style="text-align:left;">
2018-05-08
</td>
<td style="text-align:left;">
roadie
</td>
<td style="text-align:left;">
MtOsmond-Bullock-OldFreeway
</td>
<td style="text-align:right;">
6.90710
</td>
<td style="text-align:right;">
1707
</td>
<td style="text-align:right;">
157.9
</td>
</tr>
<tr>
<td style="text-align:left;">
2012-05-31
</td>
<td style="text-align:left;">
tourer
</td>
<td style="text-align:left;">
MtOsmond-Bullock-OldFreeway
</td>
<td style="text-align:right;">
6.89958
</td>
<td style="text-align:right;">
1713
</td>
<td style="text-align:right;">
157.5
</td>
</tr>
<tr>
<td style="text-align:left;">
2014-12-04
</td>
<td style="text-align:left;">
cx
</td>
<td style="text-align:left;">
MtOsmond-Bullock-OldFreeway
</td>
<td style="text-align:right;">
6.89920
</td>
<td style="text-align:right;">
1728
</td>
<td style="text-align:right;">
157.4
</td>
</tr>
<tr>
<td style="text-align:left;">
2014-07-18
</td>
<td style="text-align:left;">
cx
</td>
<td style="text-align:left;">
MtOsmond-Bullock-OldFreeway
</td>
<td style="text-align:right;">
7.11070
</td>
<td style="text-align:right;">
1729
</td>
<td style="text-align:right;">
151.7
</td>
</tr>
<tr>
<td style="text-align:left;">
2018-05-01
</td>
<td style="text-align:left;">
cx
</td>
<td style="text-align:left;">
MtOsmond-Bullock-OldFreeway
</td>
<td style="text-align:right;">
6.91200
</td>
<td style="text-align:right;">
1731
</td>
<td style="text-align:right;">
157.4
</td>
</tr>
</tbody>
</table>
<hr />
<table>
<caption>
<span id="tab:lapsCombine">Table 3: </span>Starred laps with more than 40 efforts
</caption>
<thead>
<tr>
<th style="text-align:left;">
LapName
</th>
<th style="text-align:right;">
efforts
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Belair NP - Eastern Gate
</td>
<td style="text-align:right;">
354
</td>
</tr>
<tr>
<td style="text-align:left;">
MtOsmond-Bullock-OldFreeway
</td>
<td style="text-align:right;">
230
</td>
</tr>
<tr>
<td style="text-align:left;">
Belair Rd
</td>
<td style="text-align:right;">
178
</td>
</tr>
<tr>
<td style="text-align:left;">
Windy Point Climb
</td>
<td style="text-align:right;">
153
</td>
</tr>
<tr>
<td style="text-align:left;">
Mt Osmond (Beaumont side short)
</td>
<td style="text-align:right;">
100
</td>
</tr>
<tr>
<td style="text-align:left;">
Full Norton - bridge to gates
</td>
<td style="text-align:right;">
95
</td>
</tr>
<tr>
<td style="text-align:left;">
The Old Freeway (Tollgate to Bollards)
</td>
<td style="text-align:right;">
89
</td>
</tr>
<tr>
<td style="text-align:left;">
Aldgate Valley Road
</td>
<td style="text-align:right;">
83
</td>
</tr>
<tr>
<td style="text-align:left;">
Sturt Valley Rd
</td>
<td style="text-align:right;">
74
</td>
</tr>
<tr>
<td style="text-align:left;">
Humpty
</td>
<td style="text-align:right;">
72
</td>
</tr>
<tr>
<td style="text-align:left;">
Tilleys Hil Rd
</td>
<td style="text-align:right;">
70
</td>
</tr>
<tr>
<td style="text-align:left;">
Caroline Path
</td>
<td style="text-align:right;">
42
</td>
</tr>
<tr>
<td style="text-align:left;">
Clarendon to Bakers Gully
</td>
<td style="text-align:right;">
42
</td>
</tr>
</tbody>
</table>
<hr />
<div id="lap-data" class="section level2">
<h2>Lap data</h2>
<div class="figure"><span id="fig:lapCheckDist"></span>
<img src="/post/2018-10-09-my-segment-data_files/figure-html/lapCheckDist-1.png" alt="Lap distance (km)" width="672" />
<p class="caption">
Figure 1: Lap distance (km)
</p>
</div>
<p>Hmm. There’s a few laps with massive distance outliers… and some that just look like they’re recorded differently. Perhaps the outliers are best fixed by replacing with NA and letting the rest of the data set the distance for that lap. Those that are recorded differently are perhaps unretreivable (or I could go back and make [private] segments in Strava to match).</p>
<p>Those that don’t match (mean difference between Access and Strava &gt; 100 m) are in Table <a href="#tab:diffLaps">4</a></p>
<hr />
<table>
<caption>
<span id="tab:diffLaps">Table 4: </span>Segments with a difference in mean distance between Strava and Access of greater than 100 m
</caption>
<thead>
<tr>
<th style="text-align:left;">
LapName
</th>
<th style="text-align:right;">
Access
</th>
<th style="text-align:right;">
Strava(Veloviewer)
</th>
<th style="text-align:right;">
meanDistDiff
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Humpty
</td>
<td style="text-align:right;">
2.441476
</td>
<td style="text-align:right;">
2.559759
</td>
<td style="text-align:right;">
118.2832
</td>
</tr>
<tr>
<td style="text-align:left;">
The Old Freeway (Tollgate to Bollards)
</td>
<td style="text-align:right;">
8.642000
</td>
<td style="text-align:right;">
8.761935
</td>
<td style="text-align:right;">
119.9348
</td>
</tr>
<tr>
<td style="text-align:left;">
Windy Point Climb
</td>
<td style="text-align:right;">
3.152143
</td>
<td style="text-align:right;">
3.605286
</td>
<td style="text-align:right;">
453.1428
</td>
</tr>
</tbody>
</table>
<hr />
<div class="figure"><span id="fig:lapCheckDistII"></span>
<img src="/post/2018-10-09-my-segment-data_files/figure-html/lapCheckDistII-1.png" alt="Difference in lap distance from mean distance (km)" width="672" />
<p class="caption">
Figure 2: Difference in lap distance from mean distance (km)
</p>
</div>
<hr />
</div>
<div id="acknowledgements" class="section level1">
<h1>Acknowledgements</h1>
<table>
<caption>
<span id="tab:packages">Table 5: </span>R packages explicitly loaded (i.e. not including dependencies) to create this post
</caption>
<thead>
<tr>
<th style="text-align:left;">
Package
</th>
<th style="text-align:left;">
Description
</th>
<th style="text-align:left;">
Citation
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
bookdown
</td>
<td style="text-align:left;">
bookdown: Authoring Books and Technical Documents with R Markdown
</td>
<td style="text-align:left;">
<span class="citation">@R-bookdown</span>
</td>
</tr>
<tr>
<td style="text-align:left;">
knitr
</td>
<td style="text-align:left;">
knitr: A General-Purpose Package for Dynamic Report Generation in R
</td>
<td style="text-align:left;">
<span class="citation">@R-knitr</span>
</td>
</tr>
<tr>
<td style="text-align:left;">
lubridate
</td>
<td style="text-align:left;">
lubridate: Make Dealing with Dates a Little Easier
</td>
<td style="text-align:left;">
<span class="citation">@R-lubridate</span>
</td>
</tr>
<tr>
<td style="text-align:left;">
tidyverse
</td>
<td style="text-align:left;">
tidyverse: Easily Install and Load ‘Tidyverse’ Packages
</td>
<td style="text-align:left;">
<span class="citation">@R-tidyverse</span>
</td>
</tr>
<tr>
<td style="text-align:left;">
zoo
</td>
<td style="text-align:left;">
zoo: S3 Infrastructure for Regular and Irregular Time Series (Z’s
</td>
<td style="text-align:left;">
<span class="citation">@R-zoo</span>
</td>
</tr>
</tbody>
</table>
<hr />
</div>
<div id="citations" class="section level1">
<h1>Citations</h1>
</div>
